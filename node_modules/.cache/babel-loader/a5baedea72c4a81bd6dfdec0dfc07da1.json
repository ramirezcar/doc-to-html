{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, PromiseArray, apiRejection, debug) {\n  var util = require(\"./util\");\n\n  var tryCatch = util.tryCatch;\n  var errorObj = util.errorObj;\n  var async = Promise._async;\n\n  Promise.prototype[\"break\"] = Promise.prototype.cancel = function () {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n    var promise = this;\n    var child = promise;\n\n    while (promise._isCancellable()) {\n      if (!promise._cancelBy(child)) {\n        if (child._isFollowing()) {\n          child._followee().cancel();\n        } else {\n          child._cancelBranched();\n        }\n\n        break;\n      }\n\n      var parent = promise._cancellationParent;\n\n      if (parent == null || !parent._isCancellable()) {\n        if (promise._isFollowing()) {\n          promise._followee().cancel();\n        } else {\n          promise._cancelBranched();\n        }\n\n        break;\n      } else {\n        if (promise._isFollowing()) promise._followee().cancel();\n\n        promise._setWillBeCancelled();\n\n        child = promise;\n        promise = parent;\n      }\n    }\n  };\n\n  Promise.prototype._branchHasCancelled = function () {\n    this._branchesRemainingToCancel--;\n  };\n\n  Promise.prototype._enoughBranchesHaveCancelled = function () {\n    return this._branchesRemainingToCancel === undefined || this._branchesRemainingToCancel <= 0;\n  };\n\n  Promise.prototype._cancelBy = function (canceller) {\n    if (canceller === this) {\n      this._branchesRemainingToCancel = 0;\n\n      this._invokeOnCancel();\n\n      return true;\n    } else {\n      this._branchHasCancelled();\n\n      if (this._enoughBranchesHaveCancelled()) {\n        this._invokeOnCancel();\n\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Promise.prototype._cancelBranched = function () {\n    if (this._enoughBranchesHaveCancelled()) {\n      this._cancel();\n    }\n  };\n\n  Promise.prototype._cancel = function () {\n    if (!this._isCancellable()) return;\n\n    this._setCancelled();\n\n    async.invoke(this._cancelPromises, this, undefined);\n  };\n\n  Promise.prototype._cancelPromises = function () {\n    if (this._length() > 0) this._settlePromises();\n  };\n\n  Promise.prototype._unsetOnCancel = function () {\n    this._onCancelField = undefined;\n  };\n\n  Promise.prototype._isCancellable = function () {\n    return this.isPending() && !this._isCancelled();\n  };\n\n  Promise.prototype.isCancellable = function () {\n    return this.isPending() && !this.isCancelled();\n  };\n\n  Promise.prototype._doInvokeOnCancel = function (onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n      for (var i = 0; i < onCancelCallback.length; ++i) {\n        this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n      }\n    } else if (onCancelCallback !== undefined) {\n      if (typeof onCancelCallback === \"function\") {\n        if (!internalOnly) {\n          var e = tryCatch(onCancelCallback).call(this._boundValue());\n\n          if (e === errorObj) {\n            this._attachExtraTrace(e.e);\n\n            async.throwLater(e.e);\n          }\n        }\n      } else {\n        onCancelCallback._resultCancelled(this);\n      }\n    }\n  };\n\n  Promise.prototype._invokeOnCancel = function () {\n    var onCancelCallback = this._onCancel();\n\n    this._unsetOnCancel();\n\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n  };\n\n  Promise.prototype._invokeInternalOnCancel = function () {\n    if (this._isCancellable()) {\n      this._doInvokeOnCancel(this._onCancel(), true);\n\n      this._unsetOnCancel();\n    }\n  };\n\n  Promise.prototype._resultCancelled = function () {\n    this.cancel();\n  };\n};","map":{"version":3,"sources":["C:/Users/Carlos/Desktop/Coding/doc-to-html/node_modules/bluebird/js/release/cancel.js"],"names":["module","exports","Promise","PromiseArray","apiRejection","debug","util","require","tryCatch","errorObj","async","_async","prototype","cancel","cancellation","_warn","promise","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","undefined","canceller","_invokeOnCancel","_cancel","_setCancelled","invoke","_cancelPromises","_length","_settlePromises","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","isArray","i","length","e","call","_boundValue","_attachExtraTrace","throwLater","_resultCancelled","_onCancel","_invokeInternalOnCancel"],"mappings":"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","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n"]},"metadata":{},"sourceType":"script"}