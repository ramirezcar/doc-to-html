{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection, Proxyable) {\n  var util = require(\"./util\");\n\n  var isArray = util.isArray;\n\n  function toResolutionValue(val) {\n    switch (val) {\n      case -2:\n        return [];\n\n      case -3:\n        return {};\n    }\n  }\n\n  function PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n\n    if (values instanceof Promise) {\n      promise._propagateFrom(values, 3);\n    }\n\n    promise._setOnCancel(this);\n\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n\n    this._init(undefined, -2);\n  }\n\n  util.inherits(PromiseArray, Proxyable);\n\n  PromiseArray.prototype.length = function () {\n    return this._length;\n  };\n\n  PromiseArray.prototype.promise = function () {\n    return this._promise;\n  };\n\n  PromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n\n    if (values instanceof Promise) {\n      values = values._target();\n      var bitField = values._bitField;\n      ;\n      this._values = values;\n\n      if ((bitField & 50397184) === 0) {\n        this._promise._setAsyncGuaranteed();\n\n        return values._then(init, this._reject, undefined, this, resolveValueIfEmpty);\n      } else if ((bitField & 33554432) !== 0) {\n        values = values._value();\n      } else if ((bitField & 16777216) !== 0) {\n        return this._reject(values._reason());\n      } else {\n        return this._cancel();\n      }\n    }\n\n    values = util.asArray(values);\n\n    if (values === null) {\n      var err = apiRejection(\"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n\n      this._promise._rejectCallback(err, false);\n\n      return;\n    }\n\n    if (values.length === 0) {\n      if (resolveValueIfEmpty === -5) {\n        this._resolveEmptyArray();\n      } else {\n        this._resolve(toResolutionValue(resolveValueIfEmpty));\n      }\n\n      return;\n    }\n\n    this._iterate(values);\n  };\n\n  PromiseArray.prototype._iterate = function (values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n\n    for (var i = 0; i < len; ++i) {\n      var maybePromise = tryConvertToPromise(values[i], result);\n\n      if (maybePromise instanceof Promise) {\n        maybePromise = maybePromise._target();\n        bitField = maybePromise._bitField;\n      } else {\n        bitField = null;\n      }\n\n      if (isResolved) {\n        if (bitField !== null) {\n          maybePromise.suppressUnhandledRejections();\n        }\n      } else if (bitField !== null) {\n        if ((bitField & 50397184) === 0) {\n          maybePromise._proxy(this, i);\n\n          this._values[i] = maybePromise;\n        } else if ((bitField & 33554432) !== 0) {\n          isResolved = this._promiseFulfilled(maybePromise._value(), i);\n        } else if ((bitField & 16777216) !== 0) {\n          isResolved = this._promiseRejected(maybePromise._reason(), i);\n        } else {\n          isResolved = this._promiseCancelled(i);\n        }\n      } else {\n        isResolved = this._promiseFulfilled(maybePromise, i);\n      }\n    }\n\n    if (!isResolved) result._setAsyncGuaranteed();\n  };\n\n  PromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n  };\n\n  PromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n\n    this._promise._fulfill(value);\n  };\n\n  PromiseArray.prototype._cancel = function () {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n\n    this._promise._cancel();\n  };\n\n  PromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n\n    this._promise._rejectCallback(reason, false);\n  };\n\n  PromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n\n    if (totalResolved >= this._length) {\n      this._resolve(this._values);\n\n      return true;\n    }\n\n    return false;\n  };\n\n  PromiseArray.prototype._promiseCancelled = function () {\n    this._cancel();\n\n    return true;\n  };\n\n  PromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n\n    this._reject(reason);\n\n    return true;\n  };\n\n  PromiseArray.prototype._resultCancelled = function () {\n    if (this._isResolved()) return;\n    var values = this._values;\n\n    this._cancel();\n\n    if (values instanceof Promise) {\n      values.cancel();\n    } else {\n      for (var i = 0; i < values.length; ++i) {\n        if (values[i] instanceof Promise) {\n          values[i].cancel();\n        }\n      }\n    }\n  };\n\n  PromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n  };\n\n  PromiseArray.prototype.getActualLength = function (len) {\n    return len;\n  };\n\n  return PromiseArray;\n};","map":{"version":3,"sources":["C:/Users/Carlos/Desktop/Coding/doc-to-html/node_modules/bluebird/js/release/promise_array.js"],"names":["module","exports","Promise","INTERNAL","tryConvertToPromise","apiRejection","Proxyable","util","require","isArray","toResolutionValue","val","PromiseArray","values","promise","_promise","_propagateFrom","_setOnCancel","_values","_length","_totalResolved","_init","undefined","inherits","prototype","length","init","_","resolveValueIfEmpty","_target","bitField","_bitField","_setAsyncGuaranteed","_then","_reject","_value","_reason","_cancel","asArray","err","classString","reason","_rejectCallback","_resolveEmptyArray","_resolve","_iterate","len","getActualLength","shouldCopyValues","Array","result","isResolved","i","maybePromise","suppressUnhandledRejections","_proxy","_promiseFulfilled","_promiseRejected","_promiseCancelled","_isResolved","value","_fulfill","_isCancellable","index","totalResolved","_resultCancelled","cancel"],"mappings":"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","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = require(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n"]},"metadata":{},"sourceType":"script"}