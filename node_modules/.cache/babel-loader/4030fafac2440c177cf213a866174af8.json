{"ast":null,"code":"// Generated by CoffeeScript 1.12.7\n(function () {\n  var XMLAttribute,\n      XMLCData,\n      XMLComment,\n      XMLDTDAttList,\n      XMLDTDElement,\n      XMLDTDEntity,\n      XMLDTDNotation,\n      XMLDeclaration,\n      XMLDocType,\n      XMLDocumentCB,\n      XMLElement,\n      XMLProcessingInstruction,\n      XMLRaw,\n      XMLStringWriter,\n      XMLStringifier,\n      XMLText,\n      getValue,\n      isFunction,\n      isObject,\n      isPlainObject,\n      ref,\n      hasProp = {}.hasOwnProperty;\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject, getValue = ref.getValue;\n  XMLElement = require('./XMLElement');\n  XMLCData = require('./XMLCData');\n  XMLComment = require('./XMLComment');\n  XMLRaw = require('./XMLRaw');\n  XMLText = require('./XMLText');\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n  XMLDeclaration = require('./XMLDeclaration');\n  XMLDocType = require('./XMLDocType');\n  XMLDTDAttList = require('./XMLDTDAttList');\n  XMLDTDEntity = require('./XMLDTDEntity');\n  XMLDTDElement = require('./XMLDTDElement');\n  XMLDTDNotation = require('./XMLDTDNotation');\n  XMLAttribute = require('./XMLAttribute');\n  XMLStringifier = require('./XMLStringifier');\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocumentCB = function () {\n    function XMLDocumentCB(options, onData, onEnd) {\n      var writerOptions;\n      this.name = \"?xml\";\n      options || (options = {});\n\n      if (!options.writer) {\n        options.writer = new XMLStringWriter(options);\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter(writerOptions);\n      }\n\n      this.options = options;\n      this.writer = options.writer;\n      this.stringify = new XMLStringifier(options);\n\n      this.onDataCallback = onData || function () {};\n\n      this.onEndCallback = onEnd || function () {};\n\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    XMLDocumentCB.prototype.node = function (name, attributes, text) {\n      var ref1, ref2;\n\n      if (name == null) {\n        throw new Error(\"Missing node name.\");\n      }\n\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node. \" + this.debugInfo(name));\n      }\n\n      this.openCurrent();\n      name = getValue(name);\n\n      if (attributes === null && text == null) {\n        ref1 = [{}, null], attributes = ref1[0], text = ref1[1];\n      }\n\n      if (attributes == null) {\n        attributes = {};\n      }\n\n      attributes = getValue(attributes);\n\n      if (!isObject(attributes)) {\n        ref2 = [attributes, text], text = ref2[0], attributes = ref2[1];\n      }\n\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n\n      if (text != null) {\n        this.text(text);\n      }\n\n      return this;\n    };\n\n    XMLDocumentCB.prototype.element = function (name, attributes, text) {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.dtdElement.apply(this, arguments);\n      } else {\n        return this.node(name, attributes, text);\n      }\n    };\n\n    XMLDocumentCB.prototype.attribute = function (name, value) {\n      var attName, attValue;\n\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode. \" + this.debugInfo(name));\n      }\n\n      if (name != null) {\n        name = getValue(name);\n      }\n\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n\n        if (!this.options.skipNullAttributes || value != null) {\n          this.currentNode.attributes[name] = new XMLAttribute(this, name, value);\n        }\n      }\n\n      return this;\n    };\n\n    XMLDocumentCB.prototype.text = function (value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.cdata = function (value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.comment = function (value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.raw = function (value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.instruction = function (target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n\n      if (target != null) {\n        target = getValue(target);\n      }\n\n      if (value != null) {\n        value = getValue(value);\n      }\n\n      if (Array.isArray(target)) {\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.currentLevel + 1), this.currentLevel + 1);\n      }\n\n      return this;\n    };\n\n    XMLDocumentCB.prototype.declaration = function (version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node.\");\n      }\n\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.doctype = function (root, pubID, sysID) {\n      this.openCurrent();\n\n      if (root == null) {\n        throw new Error(\"Missing root node name.\");\n      }\n\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node.\");\n      }\n\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dtdElement = function (name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attList = function (elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.entity = function (name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.pEntity = function (name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.notation = function (name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.up = function () {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent.\");\n      }\n\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.end = function () {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n\n      return this.onEnd();\n    };\n\n    XMLDocumentCB.prototype.openCurrent = function () {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    };\n\n    XMLDocumentCB.prototype.openNode = function (node) {\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node instanceof XMLElement) {\n          this.root = node;\n        }\n\n        this.onData(this.writer.openNode(node, this.currentLevel), this.currentLevel);\n        return node.isOpen = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.closeNode = function (node) {\n      if (!node.isClosed) {\n        this.onData(this.writer.closeNode(node, this.currentLevel), this.currentLevel);\n        return node.isClosed = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.onData = function (chunk, level) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk, level + 1);\n    };\n\n    XMLDocumentCB.prototype.onEnd = function () {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    };\n\n    XMLDocumentCB.prototype.debugInfo = function (name) {\n      if (name == null) {\n        return \"\";\n      } else {\n        return \"node: <\" + name + \">\";\n      }\n    };\n\n    XMLDocumentCB.prototype.ele = function () {\n      return this.element.apply(this, arguments);\n    };\n\n    XMLDocumentCB.prototype.nod = function (name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.txt = function (value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.dat = function (value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.com = function (value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.ins = function (target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.dec = function (version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLDocumentCB.prototype.dtd = function (root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    };\n\n    XMLDocumentCB.prototype.e = function (name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.n = function (name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.t = function (value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.d = function (value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.c = function (value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.r = function (value) {\n      return this.raw(value);\n    };\n\n    XMLDocumentCB.prototype.i = function (target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.att = function () {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.a = function () {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.ent = function (name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocumentCB.prototype.pent = function (name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocumentCB.prototype.not = function (name, value) {\n      return this.notation(name, value);\n    };\n\n    return XMLDocumentCB;\n  }();\n}).call(this);","map":{"version":3,"sources":["C:/Users/Carlos/Desktop/Coding/doc-to-html/node_modules/xmlbuilder/lib/XMLDocumentCB.js"],"names":["XMLAttribute","XMLCData","XMLComment","XMLDTDAttList","XMLDTDElement","XMLDTDEntity","XMLDTDNotation","XMLDeclaration","XMLDocType","XMLDocumentCB","XMLElement","XMLProcessingInstruction","XMLRaw","XMLStringWriter","XMLStringifier","XMLText","getValue","isFunction","isObject","isPlainObject","ref","hasProp","hasOwnProperty","require","module","exports","options","onData","onEnd","writerOptions","name","writer","stringify","onDataCallback","onEndCallback","currentNode","currentLevel","openTags","documentStarted","documentCompleted","root","prototype","node","attributes","text","ref1","ref2","Error","debugInfo","openCurrent","children","element","dtdElement","apply","arguments","attribute","value","attName","attValue","call","skipNullAttributes","cdata","comment","raw","instruction","target","i","insTarget","insValue","len","Array","isArray","length","processingInstruction","declaration","version","encoding","standalone","doctype","pubID","sysID","rootNodeName","attList","elementName","attributeName","attributeType","defaultValueType","defaultValue","dtdAttList","entity","dtdEntity","pEntity","notation","dtdNotation","up","closeNode","openNode","end","isOpen","isClosed","chunk","level","ele","nod","txt","dat","com","ins","dec","dtd","e","n","t","d","c","r","att","a","ent","pent","not"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, getValue, isFunction, isObject, isPlainObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject, getValue = ref.getValue;\n\n  XMLElement = require('./XMLElement');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocumentCB = (function() {\n    function XMLDocumentCB(options, onData, onEnd) {\n      var writerOptions;\n      this.name = \"?xml\";\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter(options);\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter(writerOptions);\n      }\n      this.options = options;\n      this.writer = options.writer;\n      this.stringify = new XMLStringifier(options);\n      this.onDataCallback = onData || function() {};\n      this.onEndCallback = onEnd || function() {};\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    XMLDocumentCB.prototype.node = function(name, attributes, text) {\n      var ref1, ref2;\n      if (name == null) {\n        throw new Error(\"Missing node name.\");\n      }\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node. \" + this.debugInfo(name));\n      }\n      this.openCurrent();\n      name = getValue(name);\n      if (attributes === null && (text == null)) {\n        ref1 = [{}, null], attributes = ref1[0], text = ref1[1];\n      }\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref2 = [attributes, text], text = ref2[0], attributes = ref2[1];\n      }\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      if (text != null) {\n        this.text(text);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.element = function(name, attributes, text) {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.dtdElement.apply(this, arguments);\n      } else {\n        return this.node(name, attributes, text);\n      }\n    };\n\n    XMLDocumentCB.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode. \" + this.debugInfo(name));\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (!this.options.skipNullAttributes || (value != null)) {\n          this.currentNode.attributes[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.text = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.cdata = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.comment = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.raw = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.instruction = function(target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.currentLevel + 1), this.currentLevel + 1);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.declaration = function(version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node.\");\n      }\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.doctype = function(root, pubID, sysID) {\n      this.openCurrent();\n      if (root == null) {\n        throw new Error(\"Missing root node name.\");\n      }\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node.\");\n      }\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dtdElement = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.entity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.pEntity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.notation = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.up = function() {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent.\");\n      }\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.end = function() {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n      return this.onEnd();\n    };\n\n    XMLDocumentCB.prototype.openCurrent = function() {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    };\n\n    XMLDocumentCB.prototype.openNode = function(node) {\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node instanceof XMLElement) {\n          this.root = node;\n        }\n        this.onData(this.writer.openNode(node, this.currentLevel), this.currentLevel);\n        return node.isOpen = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.closeNode = function(node) {\n      if (!node.isClosed) {\n        this.onData(this.writer.closeNode(node, this.currentLevel), this.currentLevel);\n        return node.isClosed = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.onData = function(chunk, level) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk, level + 1);\n    };\n\n    XMLDocumentCB.prototype.onEnd = function() {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    };\n\n    XMLDocumentCB.prototype.debugInfo = function(name) {\n      if (name == null) {\n        return \"\";\n      } else {\n        return \"node: <\" + name + \">\";\n      }\n    };\n\n    XMLDocumentCB.prototype.ele = function() {\n      return this.element.apply(this, arguments);\n    };\n\n    XMLDocumentCB.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLDocumentCB.prototype.dtd = function(root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    };\n\n    XMLDocumentCB.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLDocumentCB.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.att = function() {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.a = function() {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocumentCB.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocumentCB.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    return XMLDocumentCB;\n\n  })();\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}