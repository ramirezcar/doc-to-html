{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, PromiseArray, apiRejection) {\n  var util = require(\"./util\");\n\n  var RangeError = require(\"./errors\").RangeError;\n\n  var AggregateError = require(\"./errors\").AggregateError;\n\n  var isArray = util.isArray;\n  var CANCELLATION = {};\n\n  function SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n  }\n\n  util.inherits(SomePromiseArray, PromiseArray);\n\n  SomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n      return;\n    }\n\n    if (this._howMany === 0) {\n      this._resolve([]);\n\n      return;\n    }\n\n    this._init$(undefined, -5);\n\n    var isArrayResolved = isArray(this._values);\n\n    if (!this._isResolved() && isArrayResolved && this._howMany > this._canPossiblyFulfill()) {\n      this._reject(this._getRangeError(this.length()));\n    }\n  };\n\n  SomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n\n    this._init();\n  };\n\n  SomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n  };\n\n  SomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n  };\n\n  SomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n  };\n\n  SomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n\n    if (this._fulfilled() === this.howMany()) {\n      this._values.length = this.howMany();\n\n      if (this.howMany() === 1 && this._unwrap) {\n        this._resolve(this._values[0]);\n      } else {\n        this._resolve(this._values);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  SomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n\n    return this._checkOutcome();\n  };\n\n  SomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n      return this._cancel();\n    }\n\n    this._addRejected(CANCELLATION);\n\n    return this._checkOutcome();\n  };\n\n  SomePromiseArray.prototype._checkOutcome = function () {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n      var e = new AggregateError();\n\n      for (var i = this.length(); i < this._values.length; ++i) {\n        if (this._values[i] !== CANCELLATION) {\n          e.push(this._values[i]);\n        }\n      }\n\n      if (e.length > 0) {\n        this._reject(e);\n      } else {\n        this._cancel();\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  SomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n  };\n\n  SomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n  };\n\n  SomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n  };\n\n  SomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n  };\n\n  SomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n  };\n\n  SomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" + this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n  };\n\n  SomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n  };\n\n  function some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n      return apiRejection(\"expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n\");\n    }\n\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n  }\n\n  Promise.some = function (promises, howMany) {\n    return some(promises, howMany);\n  };\n\n  Promise.prototype.some = function (howMany) {\n    return some(this, howMany);\n  };\n\n  Promise._SomePromiseArray = SomePromiseArray;\n};","map":{"version":3,"sources":["C:/Users/Carlos/Desktop/Coding/doc-to-html/node_modules/bluebird/js/release/some.js"],"names":["module","exports","Promise","PromiseArray","apiRejection","util","require","RangeError","AggregateError","isArray","CANCELLATION","SomePromiseArray","values","constructor$","_howMany","_unwrap","_initialized","inherits","prototype","_init","_resolve","_init$","undefined","isArrayResolved","_values","_isResolved","_canPossiblyFulfill","_reject","_getRangeError","length","init","setUnwrap","howMany","setHowMany","count","_promiseFulfilled","value","_addFulfilled","_fulfilled","_promiseRejected","reason","_addRejected","_checkOutcome","_promiseCancelled","_cancel","e","i","push","_totalResolved","_rejected","message","_resolveEmptyArray","some","promises","ret","promise","_SomePromiseArray"],"mappings":"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","sourcesContent":["\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = require(\"./util\");\nvar RangeError = require(\"./errors\").RangeError;\nvar AggregateError = require(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n"]},"metadata":{},"sourceType":"script"}