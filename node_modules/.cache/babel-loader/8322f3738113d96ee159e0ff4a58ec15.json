{"ast":null,"code":"var _ = require(\"underscore\");\n\nvar ast = require(\"./ast\");\n\nfunction simplify(nodes) {\n  return collapse(removeEmpty(nodes));\n}\n\nfunction collapse(nodes) {\n  var children = [];\n  nodes.map(collapseNode).forEach(function (child) {\n    appendChild(children, child);\n  });\n  return children;\n}\n\nfunction collapseNode(node) {\n  return collapsers[node.type](node);\n}\n\nvar collapsers = {\n  element: collapseElement,\n  text: identity,\n  forceWrite: identity\n};\n\nfunction collapseElement(node) {\n  return ast.elementWithTag(node.tag, collapse(node.children));\n}\n\nfunction identity(value) {\n  return value;\n}\n\nfunction appendChild(children, child) {\n  var lastChild = children[children.length - 1];\n\n  if (child.type === \"element\" && !child.tag.fresh && lastChild && lastChild.type === \"element\" && child.tag.matchesElement(lastChild.tag)) {\n    if (child.tag.separator) {\n      appendChild(lastChild.children, ast.text(child.tag.separator));\n    }\n\n    child.children.forEach(function (grandChild) {\n      // Mutation is fine since simplifying elements create a copy of the children.\n      appendChild(lastChild.children, grandChild);\n    });\n  } else {\n    children.push(child);\n  }\n}\n\nfunction removeEmpty(nodes) {\n  return flatMap(nodes, function (node) {\n    return emptiers[node.type](node);\n  });\n}\n\nfunction flatMap(values, func) {\n  return _.flatten(_.map(values, func), true);\n}\n\nvar emptiers = {\n  element: elementEmptier,\n  text: textEmptier,\n  forceWrite: neverEmpty\n};\n\nfunction neverEmpty(node) {\n  return [node];\n}\n\nfunction elementEmptier(element) {\n  var children = removeEmpty(element.children);\n\n  if (children.length === 0 && !ast.isVoidElement(element)) {\n    return [];\n  } else {\n    return [ast.elementWithTag(element.tag, children)];\n  }\n}\n\nfunction textEmptier(node) {\n  if (node.value.length === 0) {\n    return [];\n  } else {\n    return [node];\n  }\n}\n\nmodule.exports = simplify;","map":{"version":3,"sources":["C:/Users/Carlos/Desktop/Coding/doc-to-html/node_modules/mammoth/lib/html/simplify.js"],"names":["_","require","ast","simplify","nodes","collapse","removeEmpty","children","map","collapseNode","forEach","child","appendChild","node","collapsers","type","element","collapseElement","text","identity","forceWrite","elementWithTag","tag","value","lastChild","length","fresh","matchesElement","separator","grandChild","push","flatMap","emptiers","values","func","flatten","elementEmptier","textEmptier","neverEmpty","isVoidElement","module","exports"],"mappings":"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","sourcesContent":["var _ = require(\"underscore\");\n\nvar ast = require(\"./ast\");\n\nfunction simplify(nodes) {\n    return collapse(removeEmpty(nodes));\n}\n\nfunction collapse(nodes) {\n    var children = [];\n    \n    nodes.map(collapseNode).forEach(function(child) {\n        appendChild(children, child);\n    });\n    return children;\n}\n\nfunction collapseNode(node) {\n    return collapsers[node.type](node);\n}\n\nvar collapsers = {\n    element: collapseElement,\n    text: identity,\n    forceWrite: identity\n};\n\nfunction collapseElement(node) {\n    return ast.elementWithTag(node.tag, collapse(node.children));\n}\n\nfunction identity(value) {\n    return value;\n}\n\nfunction appendChild(children, child) {\n    var lastChild = children[children.length - 1];\n    if (child.type === \"element\" && !child.tag.fresh && lastChild && lastChild.type === \"element\" && child.tag.matchesElement(lastChild.tag)) {\n        if (child.tag.separator) {\n            appendChild(lastChild.children, ast.text(child.tag.separator));\n        }\n        child.children.forEach(function(grandChild) {\n            // Mutation is fine since simplifying elements create a copy of the children.\n            appendChild(lastChild.children, grandChild);\n        });\n    } else {\n        children.push(child);\n    }\n}\n\nfunction removeEmpty(nodes) {\n    return flatMap(nodes, function(node) {\n        return emptiers[node.type](node);\n    });\n}\n\nfunction flatMap(values, func) {\n    return _.flatten(_.map(values, func), true);\n}\n\nvar emptiers = {\n    element: elementEmptier,\n    text: textEmptier,\n    forceWrite: neverEmpty\n};\n\nfunction neverEmpty(node) {\n    return [node];\n}\n\nfunction elementEmptier(element) {\n    var children = removeEmpty(element.children);\n    if (children.length === 0 && !ast.isVoidElement(element)) {\n        return [];\n    } else {\n        return [ast.elementWithTag(element.tag, children)];\n    }\n}\n\nfunction textEmptier(node) {\n    if (node.value.length === 0) {\n        return [];\n    } else {\n        return [node];\n    }\n}\n\nmodule.exports = simplify;\n"]},"metadata":{},"sourceType":"script"}