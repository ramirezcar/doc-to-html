{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, INTERNAL, debug) {\n  var util = require(\"./util\");\n\n  var TimeoutError = Promise.TimeoutError;\n\n  function HandleWrapper(handle) {\n    this.handle = handle;\n  }\n\n  HandleWrapper.prototype._resultCancelled = function () {\n    clearTimeout(this.handle);\n  };\n\n  var afterValue = function afterValue(value) {\n    return delay(+this).thenReturn(value);\n  };\n\n  var delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n\n    if (value !== undefined) {\n      ret = Promise.resolve(value)._then(afterValue, null, null, ms, undefined);\n\n      if (debug.cancellation() && value instanceof Promise) {\n        ret._setOnCancel(value);\n      }\n    } else {\n      ret = new Promise(INTERNAL);\n      handle = setTimeout(function () {\n        ret._fulfill();\n      }, +ms);\n\n      if (debug.cancellation()) {\n        ret._setOnCancel(new HandleWrapper(handle));\n      }\n\n      ret._captureStackTrace();\n    }\n\n    ret._setAsyncGuaranteed();\n\n    return ret;\n  };\n\n  Promise.prototype.delay = function (ms) {\n    return delay(ms, this);\n  };\n\n  var afterTimeout = function afterTimeout(promise, message, parent) {\n    var err;\n\n    if (typeof message !== \"string\") {\n      if (message instanceof Error) {\n        err = message;\n      } else {\n        err = new TimeoutError(\"operation timed out\");\n      }\n    } else {\n      err = new TimeoutError(message);\n    }\n\n    util.markAsOriginatingFromRejection(err);\n\n    promise._attachExtraTrace(err);\n\n    promise._reject(err);\n\n    if (parent != null) {\n      parent.cancel();\n    }\n  };\n\n  function successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n  }\n\n  function failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n  }\n\n  Promise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n      if (ret.isPending()) {\n        afterTimeout(ret, message, parent);\n      }\n    }, ms));\n\n    if (debug.cancellation()) {\n      parent = this.then();\n      ret = parent._then(successClear, failureClear, undefined, handleWrapper, undefined);\n\n      ret._setOnCancel(handleWrapper);\n    } else {\n      ret = this._then(successClear, failureClear, undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n  };\n};","map":{"version":3,"sources":["C:/Users/Carlos/Desktop/Coding/doc-to-html/node_modules/bluebird/js/release/timers.js"],"names":["module","exports","Promise","INTERNAL","debug","util","require","TimeoutError","HandleWrapper","handle","prototype","_resultCancelled","clearTimeout","afterValue","value","delay","thenReturn","ms","ret","undefined","resolve","_then","cancellation","_setOnCancel","setTimeout","_fulfill","_captureStackTrace","_setAsyncGuaranteed","afterTimeout","promise","message","parent","err","Error","markAsOriginatingFromRejection","_attachExtraTrace","_reject","cancel","successClear","failureClear","reason","timeout","handleWrapper","timeoutTimeout","isPending","then"],"mappings":"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","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = require(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n"]},"metadata":{},"sourceType":"script"}